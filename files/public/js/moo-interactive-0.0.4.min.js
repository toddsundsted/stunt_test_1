if(!window.Moo&&!document.Moo){Moo={}}(function(a){a.Interactive=function(n,e,o){var h=this;var k=o.authenticity_token;var m=o.session_state;var j=o.callback;var b=o.force;if(b||((window.JavascriptSocket||document.JavascriptSocket)&&(window.SocketManager||document.SocketManager))){var i;SocketManager.observe("loaded",function(){i=new Socket({ready:function(){i.connect(n,e)},connected:function(){i.send("GET / HTTP/1.1\n");i.send("Host: "+n+":"+e+"\n");i.send("Cookie: "+m+"\n");i.send("X-Break-A-Leg: stunt\n");i.send("Upgrade: moo\n");i.send("\n\n")},receive:function(p){j&&j(p)}},true)});h.send=function(p){i.send(p)}}else{var l;var f=1;var c=0;function d(){var q=l.responseText,p=Math.max(c,2048);c=l.responseText.length;q=q.slice(p,c);q&&j&&j(q)}function g(p){c=0;l=new XMLHttpRequest();l.onreadystatechange=function(){if(l.readyState===1){}else{if(l.readyState===2){}else{if(l.readyState===3){d()}else{if(l.readyState===4){if(l.status===200){f=1;d()}else{f*=2;d()}if(!l.beenAborted){setTimeout(g,f*1000)}l=null}}}}};if(p){l.open("POST","/__long_poll")}else{l.open("GET","/__long_poll")}l.setRequestHeader("X-Authenticity-Token",k);l.setRequestHeader("X-Break-A-Leg","stunt");l.send(p)}g();h.send=function(p){p=p.trim();l.beenAborted=true;l.abort();g(p)}}return h}})(Moo);